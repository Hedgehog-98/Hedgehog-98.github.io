(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-532a996d"],{"14ca":function(t,e,n){},"2d3b":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"search"},on:{scroll:t.searchScroll}},[n("section",{staticClass:"serachIptBox"},[n("div",{staticClass:"searchIpt"},[n("div",{staticClass:"ipt-icon",on:{click:function(e){t.value&&(t.searching=!0)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.value},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.value&&(t.searching=!0)},focus:function(e){t.inputing=!0},blur:function(e){t.inputing=!1},input:function(e){e.target.composing||(t.value=e.target.value)}}}),n("div",{class:{close:t.value},on:{click:function(e){t.value="",t.searching=!1}}})])]),t.value||t.searching?t._e():n("section",{staticClass:"search hot-search"},[n("h5",[t._v("热门搜索")]),n("ul",{staticClass:"default"},t._l(t.hots,(function(e){return n("li",{key:e.first,on:{click:function(n){t.searching=!0,t.value=e.first}}},[t._v(" "+t._s(e.first)+" ")])})),0),n("h3",[n("span",{staticClass:"text"},[t._v("所有历史记录")]),n("span",{staticClass:"clear",on:{click:t.clearAllHistory}})]),0!=t.history.length?n("ul",{staticClass:"history"},t._l(t.history,(function(e,s){return n("li",{key:s},[n("span",{staticClass:"h-icon"}),n("div",{staticClass:"right"},[n("span",{staticClass:"text"},[t._v(t._s(e))]),n("span",{staticClass:"del",on:{click:function(e){return t.deleteHistory(s)}}})])])})),0):n("p",{staticStyle:{padding:"12px",color:"#999"}},[t._v("暂时还没有历史记录...")])]),t.value&&!t.searching?n("section",{staticClass:"search search-suggest"},[n("h5",[t._v(" 搜索"),n("span",{on:{click:function(e){t.value=t.value,t.searching=!0}}},[t._v("“"+t._s(t.value))]),t._v("” ")]),n("ul",t._l(t.suggests,(function(e,s){return n("li",{key:s,on:{click:function(n){t.searching=!0,t.value=e.keyword}}},[n("span",[t._v(t._s(e.keyword))])])})),0)]):t._e(),t.searching?n("section",{staticClass:"search search-result"},[n("h5",[t._v("搜索结果")]),n("ul",{staticClass:"search-song-list"},t._l(t.searchResults,(function(e,s){return n("SearchSongItem",{key:s,attrs:{item:e,currentSongId:t.currentSongId,playing:t.playing},on:{"change-current-song":function(n){t.$emit("change-current-song",e),t.$emit("change-current-play-list",t.searchResults)}}})})),1),t.hasMore?t._e():n("div",{staticClass:"bottom-box"},[n("span",{staticClass:"no-more"},[t._v("没有更多了")]),n("span",{staticClass:"up"},[t._v("↑")])])]):t._e()])},i=[],a=n("2909"),r=(n("a9e3"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("99af"),n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"new-song-item",on:{click:function(e){return t.searchSongClick()}}},[n("div",{staticClass:"num"},[t._t("default")],2),n("div",{staticClass:"left"},[n("div",{staticClass:"title"},[t._v(" "+t._s(t.item.name)+" ")]),n("div",{staticClass:"info"},[0!==t.item.mark?n("i"):t._e(),n("span",{staticClass:"artist"},[t._v(" "+t._s(t.item.artists[0].name)+" ")]),n("em",{staticClass:"album"},[t._v(t._s(t.item.album.name))])])]),n("div",{staticClass:"icon"},[n("div",{staticClass:"play",class:{current:t.currentSongId===t.item.id,playing:t.playing}},[n("i"),n("i"),n("i"),n("i"),n("i")])])])}),o=[],c={name:"SearchSongItem",props:{item:{type:Object},currentSongId:{type:Number},playing:Boolean},methods:{searchSongClick:function(){console.log(111),this.$emit("change-current-song",this.item)}}},l=c,u=(n("6b04"),n("2877")),f=Object(u["a"])(l,r,o,!1,null,"ef4c4d4a",null),h=f.exports,d={name:"Search",components:{SearchSongItem:h},props:{currentSongId:{type:Number},playing:Boolean},data:function(){return{hots:[],suggests:[],searchResults:[],value:"",searching:!1,inputing:!1,page:0,hasMore:!1,history:JSON.parse(window.localStorage.getItem("history"))||[]}},created:function(){this.getHotsData()},methods:{getHotsData:function(){var t=this;this.axios.get("http://apis.netstart.cn/music/search/hot").then((function(e){t.hots=e.data.result.hots}),(function(t){return console.log(t)}))},getSuggestsData:function(t){var e=this;this.axios.get("http://apis.netstart.cn/music/search/suggest",{params:{keywords:t,type:"mobile"}}).then((function(t){e.suggests=t.data.result.allMatch}),(function(t){return console.log(t)}))},getSearchResultsData:function(){var t=this;this.axios.get("http://apis.netstart.cn/music/search",{params:{keywords:this.value,limit:30,offset:30*this.page}}).then((function(e){var n;console.log(e),(n=t.searchResults).push.apply(n,Object(a["a"])(e.data.result.songs)),t.page++,t.hasMore=e.data.result.hasMore,t.history=Object(a["a"])(new Set([t.value].concat(Object(a["a"])(t.history)))),window.localStorage.setItem("history",JSON.stringify(t.history))}),(function(t){return console.log(t)}))},searchScroll:function(t){this.hasMore&&(Math.ceil(t.target.offsetHeight+t.target.scrollTop)>=t.target.scrollHeight-1?(console.log(Math.ceil(t.target.offsetHeight+t.target.scrollTop),t.target.scrollHeight),console.log("触底了"),this.getSearchResultsData()):console.log("还没触底"))},deleteHistory:function(t){this.history.splice(t,1),window.localStorage.setItem("history",JSON.stringify(this.history))},clearAllHistory:function(){this.history=[],window.localStorage.clear()}},watch:{value:function(t){this.inputing&&(this.searching=!1),t&&!this.searching?this.getSuggestsData(t):this.suggests=[]},searching:function(t){t&&this.value?this.getSearchResultsData():(this.searchResults=[],this.page=0)}}},g=d,v=(n("80b6"),Object(u["a"])(g,s,i,!1,null,"05b4e5b5",null));e["default"]=v.exports},6062:function(t,e,n){"use strict";var s=n("6d61"),i=n("6566");t.exports=s("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(t,e,n){"use strict";var s=n("9bf2").f,i=n("7c73"),a=n("e2cc"),r=n("0366"),o=n("19aa"),c=n("2266"),l=n("7dd0"),u=n("2626"),f=n("83ab"),h=n("f183").fastKey,d=n("69f3"),g=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,l){var u=t((function(t,s){o(t,u,e),g(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=s&&c(s,t[l],{that:t,AS_ENTRIES:n})})),d=v(e),p=function(t,e,n){var s,i,a=d(t),r=y(t,e);return r?r.value=n:(a.last=r={index:i=h(e,!0),key:e,value:n,previous:s=a.last,next:void 0,removed:!1},a.first||(a.first=r),s&&(s.next=r),f?a.size++:t.size++,"F"!==i&&(a.index[i]=r)),t},y=function(t,e){var n,s=d(t),i=h(e);if("F"!==i)return s.index[i];for(n=s.first;n;n=n.next)if(n.key==e)return n};return a(u.prototype,{clear:function(){var t=this,e=d(t),n=e.index,s=e.first;while(s)s.removed=!0,s.previous&&(s.previous=s.previous.next=void 0),delete n[s.index],s=s.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),s=y(e,t);if(s){var i=s.next,a=s.previous;delete n.index[s.index],s.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==s&&(n.first=i),n.last==s&&(n.last=a),f?n.size--:e.size--}return!!s},forEach:function(t){var e,n=d(this),s=r(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){s(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),a(u.prototype,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return p(this,0===t?0:t,e)}}:{add:function(t){return p(this,t=0===t?0:t,t)}}),f&&s(u.prototype,"size",{get:function(){return d(this).size}}),u},setStrong:function(t,e,n){var s=e+" Iterator",i=v(e),a=v(s);l(t,e,(function(t,e){g(this,{type:s,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"6b04":function(t,e,n){"use strict";n("14ca")},"6d61":function(t,e,n){"use strict";var s=n("23e7"),i=n("da84"),a=n("94ca"),r=n("6eeb"),o=n("f183"),c=n("2266"),l=n("19aa"),u=n("861d"),f=n("d039"),h=n("1c7e"),d=n("d44e"),g=n("7156");t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),p=-1!==t.indexOf("Weak"),y=v?"set":"add",m=i[t],b=m&&m.prototype,x=m,k={},w=function(t){var e=b[t];r(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(p&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return p&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(p&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})},S=a(t,"function"!=typeof m||!(p||b.forEach&&!f((function(){(new m).entries().next()}))));if(S)x=n.getConstructor(e,t,v,y),o.enable();else if(a(t,!0)){var _=new x,C=_[y](p?{}:-0,1)!=_,I=f((function(){_.has(1)})),O=h((function(t){new m(t)})),E=!p&&f((function(){var t=new m,e=5;while(e--)t[y](e,e);return!t.has(-0)}));O||(x=e((function(e,n){l(e,x,t);var s=g(new m,e,x);return void 0!=n&&c(n,s[y],{that:s,AS_ENTRIES:v}),s})),x.prototype=b,b.constructor=x),(I||E)&&(w("delete"),w("has"),v&&w("get")),(E||C)&&w(y),p&&b.clear&&delete b.clear}return k[t]=x,s({global:!0,forced:x!=m},k),d(x,t),p||n.setStrong(x,t,v),x}},"80b6":function(t,e,n){"use strict";n("a9c6")},"99af":function(t,e,n){"use strict";var s=n("23e7"),i=n("d039"),a=n("e8b5"),r=n("861d"),o=n("7b0b"),c=n("50c4"),l=n("8418"),u=n("65f0"),f=n("1dde"),h=n("b622"),d=n("2d00"),g=h("isConcatSpreadable"),v=9007199254740991,p="Maximum allowed index exceeded",y=d>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),m=f("concat"),b=function(t){if(!r(t))return!1;var e=t[g];return void 0!==e?!!e:a(t)},x=!y||!m;s({target:"Array",proto:!0,forced:x},{concat:function(t){var e,n,s,i,a,r=o(this),f=u(r,0),h=0;for(e=-1,s=arguments.length;e<s;e++)if(a=-1===e?r:arguments[e],b(a)){if(i=c(a.length),h+i>v)throw TypeError(p);for(n=0;n<i;n++,h++)n in a&&l(f,h,a[n])}else{if(h>=v)throw TypeError(p);l(f,h++,a)}return f.length=h,f}})},a434:function(t,e,n){"use strict";var s=n("23e7"),i=n("23cb"),a=n("a691"),r=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),f=u("splice"),h=Math.max,d=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var n,s,u,f,p,y,m=o(this),b=r(m.length),x=i(t,b),k=arguments.length;if(0===k?n=s=0:1===k?(n=0,s=b-x):(n=k-2,s=d(h(a(e),0),b-x)),b+n-s>g)throw TypeError(v);for(u=c(m,s),f=0;f<s;f++)p=x+f,p in m&&l(u,f,m[p]);if(u.length=s,n<s){for(f=x;f<b-s;f++)p=f+s,y=f+n,p in m?m[y]=m[p]:delete m[y];for(f=b;f>b-s+n;f--)delete m[f-1]}else if(n>s)for(f=b-s;f>x;f--)p=f+s-1,y=f+n-1,p in m?m[y]=m[p]:delete m[y];for(f=0;f<n;f++)m[f+x]=arguments[f+2];return m.length=b-s+n,u}})},a9c6:function(t,e,n){},bb2f:function(t,e,n){var s=n("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(t,e,n){var s=n("23e7"),i=n("d012"),a=n("861d"),r=n("5135"),o=n("9bf2").f,c=n("241c"),l=n("057f"),u=n("90e3"),f=n("bb2f"),h=!1,d=u("meta"),g=0,v=Object.isExtensible||function(){return!0},p=function(t){o(t,d,{value:{objectID:"O"+g++,weakData:{}}})},y=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,d)){if(!v(t))return"F";if(!e)return"E";p(t)}return t[d].objectID},m=function(t,e){if(!r(t,d)){if(!v(t))return!0;if(!e)return!1;p(t)}return t[d].weakData},b=function(t){return f&&h&&v(t)&&!r(t,d)&&p(t),t},x=function(){k.enable=function(){},h=!0;var t=c.f,e=[].splice,n={};n[d]=1,t(n).length&&(c.f=function(n){for(var s=t(n),i=0,a=s.length;i<a;i++)if(s[i]===d){e.call(s,i,1);break}return s},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},k=t.exports={enable:x,fastKey:y,getWeakData:m,onFreeze:b};i[d]=!0}}]);
//# sourceMappingURL=chunk-532a996d.e771e245.js.map